services:
    _defaults:
        autowire: false
        autoconfigure: false
        public: false

    Jav\ApiTopiaBundle\Loader\RouteLoader:
        tags: [ routing.loader ]

    Jav\ApiTopiaBundle\GraphQL\RequestHandler:
        arguments: [ '@Jav\ApiTopiaBundle\GraphQL\SchemaBuilder']
        tags: [ controller.service_arguments ]

    Jav\ApiTopiaBundle\Command\BuildSchemaCommand:
        arguments: [ '@Jav\ApiTopiaBundle\GraphQL\SchemaBuilder']
        tags: [ console.command ]

    Jav\ApiTopiaBundle\Serializer\Serializer:
        arguments: [ '@Jav\ApiTopiaBundle\GraphQL\ResourceLoader' ]

    Jav\ApiTopiaBundle\Serializer\UploadedFileDenormalizer:
        tags: [ serializer.normalizer ]

    Jav\ApiTopiaBundle\Controller\:
        resource: '../src/Controller/'
        autowire: true
        autoconfigure: true
        tags: [ 'controller.service_arguments' ]

    Jav\ApiTopiaBundle\GraphQL\SchemaBuilder:
        arguments: [ '@Jav\ApiTopiaBundle\GraphQL\ResourceLoader', '@Jav\ApiTopiaBundle\GraphQL\TypeResolver', '@Jav\ApiTopiaBundle\GraphQL\ResolverProvider' ]
        public: true

    Jav\ApiTopiaBundle\GraphQL\ResourceLoader:
        arguments: [ '%kernel.cache_dir%' ]
    Jav\ApiTopiaBundle\GraphQL\ReflectionUtils:
        arguments: [ '@Jav\ApiTopiaBundle\GraphQL\ResourceLoader', '@Jav\ApiTopiaBundle\Serializer\Serializer' ]
    Jav\ApiTopiaBundle\GraphQL\Client: ~
    Jav\ApiTopiaBundle\GraphQL\ResolverProvider:
        arguments: [ !tagged_locator { tag: 'apitopia.graphql_resolver' }, '@Jav\ApiTopiaBundle\Serializer\Serializer', '@Jav\ApiTopiaBundle\GraphQL\MercureUrlGenerator' ]
    Jav\ApiTopiaBundle\GraphQL\TypeResolver:
        arguments: [ '@Jav\ApiTopiaBundle\GraphQL\ResourceLoader', '@Jav\ApiTopiaBundle\GraphQL\ResolverProvider', '@Jav\ApiTopiaBundle\Serializer\Serializer', '@Jav\ApiTopiaBundle\GraphQL\ReflectionUtils' ]
    Jav\ApiTopiaBundle\GraphQL\MercureUrlGenerator:
        arguments: [ '@?Symfony\Component\Mercure\HubRegistry', '@?Symfony\Component\Mercure\Authorization', '@request_stack' ]
    Jav\ApiTopiaBundle\Cache\ResourcesWarmer:
        arguments: [ '@Jav\ApiTopiaBundle\GraphQL\ResourceLoader' ]
        tags:
            - { name: kernel.cache_warmer }
